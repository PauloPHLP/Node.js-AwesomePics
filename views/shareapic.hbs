<div class="cd-hero">      
    <ul class="cd-hero-slider">
        <li class="selected">          
            <div class="cd-full-width" id="login_page">
                <div class="container-fluid js-tm-page-content tm-page-pad">
                    <div class="tm-contact-page">     
                        <div class="row">
                            <div class="cd-full-width">
                                <div class="container-fluid js-tm-page-content tm-page-pad" data-page-no="5">
                                    <div class="tm-contact-page"> 
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="tm-flex tm-contact-container">    
                                                    <div class="tm-bg-white-translucent text-xs-left tm-textbox tm-2-col-textbox-2 tm-textbox-padding tm-textbox-padding-contact">
                                                        <h2 class="tm-contact-info">Hey, {{userName}}!</h2>
                                                        <p class="tm-text">Here you can upload and share an awesome pic with the world! Let's start?</p> 
                                                        <form class="tm-contact-form" id="upload_form">
                                                            <div class="form-group"> 
                                                                <input type="file" id="image" name="image" class="form-control" placeholder="Select a beautiful pic."  required/>
                                                            </div>         
                                                            <div class="form-group">
                                                                <input type="text" id="title" name="title" class="form-control" placeholder="Choose a title for your image." maxlength="15" required/>
                                                            </div>
                                                            <div class="form-group">  
                                                                <input type="text" id="text" name="text" class="form-control" placeholder="Say something nice about your image. Be short." maxlength="100" required/>
                                                            </div>          
                                                            <button type="submit" class="pull-xs-right tm-submit-btn">Share this awesome pic with the world!</button>  
                                                        </form>  
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                    </div>    
                </div>
            </div>
        </li>
    </ul>
</div>

<script>
    $('#upload_form').submit(function(e) {
        e.preventDefault();

        var formData = new FormData($(this)[0]);
        
        $.ajax({
            url: '/api/shareapic',
            type: 'POST',
            data: formData,
            async: false,
            contentType: false,
            cache: false,
            enctype: 'multipart/form-data',
            processData: false,
            success: (data) => {
                alert('Image uploaded successfully!');
                window.location.href = "/"
            },
            error: () => {
                alert('An issue has occurred!');
            }
        })
    })
</script>